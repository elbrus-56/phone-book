# Установка

### 1. Для начала скопируйте репозиторий:
```
git clone git@github.com:elbrus-56/phone-book.git
```

### 2. Создайте виртуальное окружение:
```
python -m venv venv
```

### 3. Активируйте виртуальное окружение:
```
source venv/bin/activate
```

### 4. Установите необходимые зависимости из requirements.txt:
```
pip install -r requirements.txt
```

### 5. Далее запускаем приложение из папки, где находится приложение:
```
python app.py
или
python app.py -h
или
python app.py --help
```


# Использование

### После введенной в пункте 5 команды, доступно 4 функции:

- ### Вывести все записи
    ```
    python app.py select_records
    ```
    Внимание! Если не указан постраничный вывод, то по-умолчанию установлен вывод 1 страницы и 1000 записей

    #### Постраничный вывод
    ```
    python app.py select_records -pi 1 5

    или

    python app.py select_records --page_and_items_per_page 1 5
    ```
    где 1 - номер страницы, 5 - количество записей на странице

- ### Добавить новую запись

    Синтаксис:
    ```
    python app.py insert_record --first_name [VALUES] --last_name [VALUES] --middle_name [VALUES] --company [VALUES] --phone_1 [VALUES] --phone_2 [VALUES]
    ```

    Пример:

    ```
    python app.py insert_record --first_name Тест --last_name Тестов --middle_name Тестович --company "ООО Тесттест" --phone_1 +73511231212 --phone_2 +79998887766

    или

    python app.py insert_record --first_name=Тест --last_name=Тестов --middle_name=Тестович --company="ООО Тесттест" --phone_1=+73511231212 --phone_2=+79998887766
    ```

    Внимание! Атрибуты, состоящие из двух и более слов необходимо заключать в кавычки.
    (См. атрибут --company "ООО Тесттест")

    Справку можно увидеть, выполнив команду:

    ```
    python app.py insert_record -h
    или
    python app.py insert_record --help
    ```

- ### Обновить запись (полностью или частично)

    Синтаксис:

    ```
    python app.py update_record --id [VALUES] [--first_name [VALUES]] [--last_name [VALUES]] [--middle_name [VALUES]] [--company [VALUES]] [--phone_1 [VALUES]] [--phone_2 [VALUES]]
    ```

    где --id - идентификационный номер записи, которую нужно изменить.

    Пример:

    ```
    python app.py update_record --id 4 --first_name Тест --last_name Тестов --middle_name Тестович --company "ООО Тесттест" --phone_1 +73511231212 --phone_2 +79998887766

    или

    python app.py insert_record --id=4 --first_name=Тест --last_name=Тестов --middle_name=Тестович
    ```

    Справку можно увидеть, выполнив команду:
    ```
    python app.py update_record -h
    или
    python app.py update_record --help
    ```

- ### Поиск записей (по одному или нескольким полям)

    Синтаксис
    ```
    python app.py search_record [--first_name [VALUES]] [--last_name [VALUES]] [--middle_name [VALUES]] [--company [VALUES]] [--phone_1 [VALUES]] [--phone_2 [VALUES]]
    ```

    Пример
    ```
    python app.py search_record --first_name=Тест --last_name=Тестов

    или

    python app.py search_record --first_name=тест --last_name=тестов

    или

    python app.py search_record --first_name ТЕСТ --last_name ТЕСТОВ

    ```

    Внимание! Регистр одиночных слов может быть любым.
    Имена, состоящие из нескольких слов, нужно искать с учетом регистра и заключением в кавычки.
    Поиск работает как по одному, так и по нескольким атрибутам.
    Частичный поиск не работает. Поиск не ищет часть слова, например, 'те' в слове 'тест'

    Справку можно увидеть, выполнив команду:
    ```
    python app.py search_record -h
    или
    python app.py search_record --help
    ```


# Особенности тестирования

Юнит тесты расположены в каталоге /tests

Тесты написаны только к модулю service.py

Так как текстовая база данных не пересоздается заново, все результаты тестов
вносятся в основной файл data.json. Поэтому нужно следить за изменениями в этом файле
после тестов.

По этой же причине пропущены некоторые сценарии тестов. Это взаимоисключающие сценарии. И правильно работают либо одни тесты, либо другие.


# О приложении

Версия python 3.9.5

За интерфейс приложения отвечает модуль app.py. Для создания интерейса командной строки, использована встроенная библиотека argparse. За логику обработки данных и взаимодействия с текстовой базой данных - service.py

Для хранения использован текстовый файл в формате json. Для сериализации и десериализации использована стандартная библиотека json.

Для написания функций данного приложения ориентировался на работу СУБД.

Аннотации типов использованы для входных параметров функции и самой функции.
Аннотации типов к переменным, где очевидно, какая это переменная, не ставил.
Старался указывать явные имена переменных, чтобы не использовать дополнительных пояснений.

Докстринг у функций написан кратко без описания параметров внутри, потому что отдельно описаны входные параметры.

Использованы линтеры MyPy, Flake8 и форматировщик autopep8

Что можно улучшить?

Можно было бы поработать над алгоритмом поиска записей по атрибутам.
И можно было поработать над частичным поиском по словам.
